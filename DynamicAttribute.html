<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<title>Clavrit</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="description" content="" />
	<meta name="author" content="http://webthemez.com" />
	<!-- css -->
	<link href="css/bootstrap.min.css" rel="stylesheet" />
	<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
	<link href="css/fancybox/jquery.fancybox.css" rel="stylesheet">
	<!-- <link href="css/jcarousel.css" rel="stylesheet" /> -->
	<link href="css/flexslider.css" rel="stylesheet" />
	<link href="css/style.css" rel="stylesheet" />
	<link href="css/blog.css" rel="stylesheet" />
	<link href="css/footer.css" rel="stylesheet" />

	<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
	<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

</head>

<body>
	<div id="wrapper">
		<!-- start header -->
		<header>
			<div class="navbar navbar-default navbar-static-top">
				<div class="container">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle" data-toggle="collapse"
							data-target=".navbar-collapse">
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
						<a class="navbar-brand" href="index.html"><img src="img/logo.png" class="logoz"
								alt="logo" /></a>
					</div>
					<div class="navbar-collapse collapse ">
						<ul class="nav navbar-nav">
							<li><a href="index.html">Home</a></li>
							<li><a href="services.html">Services</a></li>
							<!-- <li><a href="portfolio.html">Portfolio</a></li> -->
							<!-- <li class="active"><a href="pricing.html">Resources</a></li> -->
							<li class="dropdown">
								<a style="background-color: transparent; color: white" class="dropdown-toggle"
									data-toggle="dropdown" href="#">Resources <span class="caret"></span></a>
								<ul class="dropdown-menu">
									<li>
										<a class="d2" href="blogs.html">Blogs</a>
									</li>
									<!-- <li><a class="d2" href="caseStudies.html">Case Studies</a></li> -->
								</ul>
							</li>
							<li class="dropdown">
								<a style="background-color: transparent; color: white" class="dropdown-toggle"
									data-toggle="dropdown" href="#">Company <span class="caret"></span></a>
								<ul class="dropdown-menu">
									<li>
										<a class="d2" href="about.html">About Us</a>
									</li>
									<li><a class="d2" href="career.html">Career</a></li>
									<li><a class="d2" href="contact.html">Contact Us</a></li>
								</ul>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</header><!-- end header -->
		<section id="inner-headline" style="padding: 0%;">
			<div class="container">
				<div class="row">
					<div class="col-lg-12">
						<h2 class="pageTitle">Blogs</h2>
					</div>
				</div>
			</div>
		</section>

		<div style="background-color: white; width: 100%; padding: 0%;" class="container">
			<div style="font-size: large;" class="col-md-9 col-md-offset-2 col-xs-20">
				<div style="font-size: medium;" class="mainheading">

					<!-- Begin Top Meta -->
					<!-- <div class="row post-top-meta">
						<div class="col-md-2 align">
							<img class="author-thumb" src="img/blog/dynamic attribute/salauddin.png" alt="Salauddin Image">
						</div>
						<div class="col-md-10 col-sm-6 flex-container">
							<p>Salauddin</p>
							<span class="author-description">Hi, I'm Salauddin, SAP Hybris developer with 4 years of experience.
								My skills are customizing various modules within SAP Commerce.<br>
								I am passionate about expanding my knowledge in Angular, commercetools, and other emerging technologies.</span>
								<br>
							<span class="post-date">02 April 2024</span><span class="dot"></span><span
								class="post-read">6 min read</span>
						</div>
					</div> -->
					<!-- End Top Menta -->

					<h1 class="posttitle">Dynamic Attribute in SAP Commerce</h1>

				</div>

				<!-- Begin Featured Image -->
				<img class="img-fluid blog-banner" src="img/blog/dynamic attribute/dynamic.png" alt="">

				<!-- End Featured Image -->

				<!-- Begin Post Content -->
				<div class="article-post">
					<p>
						<br>
						Dynamic attributes allow you to add custom attributes to your model without modifying the model class itself. 
						They enable you to create custom logic for these attributes, which is not present in the standard model class. 
						Dynamic attributes serve as transient data, meaning they are not stored in the database.
					</p>
					<br>
					<p><span class="abc">When we define an <b>attribute</b> for an <b>item type,</b> it comes with a tag called <b>"persistence type".</b></span>
						<br><span class="abc">If the persistence type is <b>set to "property"</b></span>
						<br><span class="abc">A corresponding column is created in the database.
							<br>Values assigned to this attribute will be stored in the database.
							<br>This type of attribute is called a "persistence attribute" because its values persist in the database.</span>
						<br>
						<br><span class="abc">If the persistence type is <b> set to "dynamic"</b></span>
						<br><span class="abc">No column is created in the database.
							<br>Values assigned to this attribute will not be stored in the database.
							<br>This type of attribute is called a "non-persistent" or "dynamic" attribute because its values are not persisted in the database.
						<br><br>
						For every dynamic attribute we define, we need to specify the attribute handler. If we don't specify it, a Bean Id will be generated automatically.
						In such cases, we must use the generated Bean Id when defining the Spring bean in XML.
						<br><br>
						The attribute handler is implemented using Spring. Therefore, we need to specify the Spring bean Id for the attribute handler. 
						After that, we define a class for that Spring bean Id which provides the custom logic for the dynamic attribute. 
						This class contains the logic for how the dynamic attribute behaves and is responsible for handling its behavior.
						</span>
					</p>
					<h3>Example:</h3>

					<h4>Step-1:-</h4>

					<p>Define a new  attributes in existing item type.
						<br>D:\Hybris2205SPA\hybris\bin\custom\clavrit\clavritcore\resources\clavritcore-items.xml</p>
<pre>
	<xmp>
<itemtype code="Voucher" autocreate="false" generate="false">
	<attributes>
		<attribute qualifier="startDate" type="java.util.Date">
		<modifiers read="true" write="true" search="true"/>
		<persistence type="property"/>
	</attribute>
	<attribute qualifier="endtDate" type="java.util.Date">
		<modifiers read="true" write="true" search="true"/>
		<persistence type="property"/>
	</attribute>
	<attribute qualifier="daysLeftToExpiry" type="java.lang.String">
		<persistence type="dynamic" attributeHandler="dayBeforExpiryHandler"/>
	</attribute>
	</attributes>
</itemtype>
</xmp>
</pre>


					<h4>Step-2:-</h4>

					<p> Create DynamicAttributeHandler class for handeling the newly created custom dynamic attribute.
						<br>D:\Hybris2205SPA\hybris\bin\custom\clavrit\clavritcore\src\com\clavrit\core\dynamic\DayBeforExpiryHandler.java</p>
					<pre>
package com.clavrit.core.dynamic;

import de.hybris.platform.servicelayer.model.attribute.DynamicAttributeHandler;
import de.hybris.platform.voucher.model.VoucherModel;

import java.time.LocalDate;
import java.time.Period;
import java.time.ZoneId;
import java.util.Date;

public class DayBeforExpiryHandler implements DynamicAttributeHandler<String, VoucherModel> {
    final public static String EXPIRY_MSG_DATE_NOT_AVAIALBLE = "Expiry data is not Available";
    final public static String VOUCHER_EXPIRED = "Voucher Expired";
    final public static String MONTHS = "Months :";
    final public static String DAYS = "Days :";
    final public static String DAY = "Day :";
    final public static String COMMA = ", ";


    @Override
    public String get(VoucherModel voucherModel) {
        Date eDate = voucherModel.getEndtDate();
        if (eDate == null) {
          return EXPIRY_MSG_DATE_NOT_AVAIALBLE;
        }
        LocalDate expiryDate = eDate.toInstant().atZone(ZoneId.systemDefault()).toLocalDate();
        LocalDate currentDate = LocalDate.now();
        return currentDate.isBefore(expiryDate) ? getMessage(expiryDate,currentDate) : VOUCHER_EXPIRED ;
    }

    @Override
    public void set(VoucherModel model, String s) {

    }

    private String getMessage( LocalDate expiryDate , LocalDate currentDate){

        Period period = Period.between(currentDate, expiryDate);
        int daysLeft = period.getDays();
        int monthsLeft = period.getMonths();
        if(monthsLeft!=0){
            return MONTHS + monthsLeft + COMMA + DAYS + daysLeft;
        }
        return  daysLeft==1 ? DAY + daysLeft :DAYS + daysLeft;
    }
}

</pre>

<h4>Step-3:-</h4>
<p>Define bean inside clavritcore-spring.xml.
    <br>D:\Hybris2205SPA\hybris\bin\custom\clavrit\clavritcore\resources\clavritcore-spring.xml</p>
<pre>
    <xmp>
   <bean id="dayBeforExpiryHandler" class="com.clavrit.core.dynamic.DayBeforExpiryHandler"/>
	</xmp>
</pre>

<h4>Note:</h4>
<p>Bean id should be same as attributeHandler mentioned in items.xml.</p>

<h4>Step-4:-</h4>
<p> Perform build and then update the system using HAC Or CMD</p>

<h4>Step-5:-</h4>
<p>Now we can check inside backoffice as I have shown below
	<br>Now set endDate in my case its is 03 April and currentDate is 02 April, we can see bellow</p>
	<img width="75%" class=" img-fluid" src="img/blog/dynamic attribute/backoffice1.png" alt="">
	<br>We can see 1 day left to expire
	<br>If it's been more than a day, then it will show as one day.</p>
	<br>
	<img width="75%" class=" img-fluid" src="img/blog/dynamic attribute/backoffice2.png" alt="">
	<br>If the expiry date exceeds 30 days, it will be changed to a month.</p>
	<br>
	<img width="75%" class=" img-fluid" src="img/blog/dynamic attribute/backoffice3.png" alt="">
	<br>The code displays an expired message when it passes the set expiration date.</p>
	<br>
	<img width="75%" class=" img-fluid" src="img/blog/dynamic attribute/backoffice4.png" alt="">
	<br><br>
	<img width="75%" class=" img-fluid" src="img/blog/dynamic attribute/backoffice5.png" alt="">
		<!-- End Post Content -->
	</div>
	<br><br>
		</div>
		</div>
		<footer style="padding-top: 20px;">
			<div class="container">
				<div class="row" style="margin: 0px;">
					<div class="col-lg-4" id="contact">
						<div class="widget">
							<h5 class="widgetheading">Our Contact</h5>
	  
							<address style="margin-bottom: 0px;">
							  <strong>Clavrit Digital Solutions</strong><br />
							  18, Institutional Area,Prem Puri, Sector 32,<br>
							  Gurugram, Haryana,122001-India
							</address>
			 
							<p>
							  <i class="icon-phone"></i>
							  +91-9810167782<br />
							  <i class="icon-phone"></i> 0124- 7177829 <br />
							  <i class="icon-envelope-alt"></i>
							  info@clavrit.com
							</p>
						</div>
					</div>
	  
					<div class="col-lg-2" id="quickLinks">
						<div class="widget">
							<h5 class="widgetheading">Quick Links</h5>
	  
							<ul class="link-list">
							  <li>
								<a href="services.html">Services</a>
							  </li>
							  <l >
								<a href="about.html">About Us</a>
							  </li>
							  <li>
								<a href="blogs.html">Blogs</a>
							  </li>
							  <li>
								<a href="career.html">Career</a>
							  </li>
							  <li>
								<a href="contact.html">Contact us</a>
							  </li>
							</ul>
						</div>
					</div>
	  
					<div class="col-lg-4" id="contact">
						<div class="widget">
							<h5 class="widgetheading">Latest posts</h5>
	  
							<ul class="link-list">
							  <li>
								<a href="reactivejava.html"
								  >Reactive Programming Through Java</a
								>
							  </li>
			 
							  <li>
								<a href="SAPclassification.html"
								  >Classification Systems In SAP Commerce</a
								>
							  </li>

							  <li>
								<a href="SRGAN.html"
								  >Revolutionizing Image Enhancement: A Deep Dive into SRGAN</a
								>
							  </li>

							  <li>
								<a href="ExploratoryTesting.html"
								  >Exploratory Testing: Unleashing Creativity in Quality Assurance</a
								>
							  </li>
							</ul>
						</div>
					</div>
					
					<div class="col-lg-2"  id="quickLinks">
					  <div class="widget">
						  <h5 class="widgetheading">Quick Links</h5>
	  
						  <ul class="social-network" style="padding-left: 0px;">
							<li>
							  <a
								class="fa fa-facebook"
								data-placement="top"
								href="https://www.facebook.com/share/iBmat7SDtXvuHWrB/?mibextid=hu50Ix"
								style="font-style: italic"
								title="Facebook"
							  ></a>
							</li>
		   
							<li>
							  <a
								class="fa fa-linkedin"
								data-placement="top"
								href="https://www.linkedin.com/company/clavrit/"
								style="font-style: italic"
								title="Linkedin"
							  ></a>
							</li>
		   
							<li>
							  <a
								class="fa fa-instagram"
								data-placement="top"
								href="https://www.instagram.com/clav.ritdigitalsolutions?igsh=MWpnNDR2NTd2OGVybg=="
								style="font-style: italic"
								title="Instagram"
							  ></a>
							</li>
						  </ul>
					  </div>
				  </div>
				  <div class="col-lg-4"></div>
					
				</div>
			</div>
	  
			<div id="sub-footer" style="margin-top: 0px;padding-top: 0px;">
				<div class="container">
					<div class="row" style="margin-bottom: 0;">
						<div class="col-lg-12">
						  <div class="copyright" style="text-align: center;">
							<p>
							  <span>&copy; 2019. Clavrit Digital Solutions. All Rights Reserved..</span>
							</p>
						  </div>
						</div>
	  
					 
					 
					</div>
				</div>
			</div>
		</footer> 
	</div>
	<a href="#" class="scrollup"><i class="fa fa-angle-up active"></i></a>
	<!-- javascript
    ================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="js/jquery.js"></script>
	<script src="js/jquery.easing.1.3.js"></script>
	<script src="https://unpkg.com/aos@next/dist/aos.js"></script>
	<script>
		AOS.init();
	</script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/jquery.fancybox.pack.js"></script>
	<script src="js/jquery.fancybox-media.js"></script>
	<script src="js/portfolio/jquery.quicksand.js"></script>
	<script src="js/portfolio/setting.js"></script>
	<script src="js/jquery.flexslider.js"></script>
	<script src="js/animate.js"></script>
	<script src="js/custom.js"></script>
</body>

</html>